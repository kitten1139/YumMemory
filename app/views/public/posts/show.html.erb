<div class="container">
  <%= flash[:notice] %>
  <h6 class="mt-3"><%= @post.user.nickname %>さんの商品レビュー詳細</h6>
  <div class="row">
    <div class="offset-md-3 col-md-6">
      <table style="word-break:break-all;">
        <thead>
          <tr>
            <th style="width:200px"></th>
            <th style="width:300px"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="2"><%= image_tag @post.get_item_image, size: "300x300" %></td>
          </tr>
          <tr>
            <td></td>
            <td id="favorite_buttons_<%= @post.id %>">
            <%= render "public/post_favorites/favorite", post: @post %>
            </td>
          </tr>
          <%= render "show", post: @post %>
        </tbody>
      </table>
    </div>

    <div class="col-md-3 align-self-end">
      <% if user_signed_in? && @post.user == current_user %>
        <!--turbolinksを部分的に無効化-->
        <div><%= link_to "投稿を編集する", edit_post_path(@post), data: {"turbolinks" => false}, class: "btn btn-outline-success mt-3" %></div>
        <div><%= link_to "削除する", post_path(@post), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-outline-danger mt-2" %></div>
      <% end %>
    </div>
  </div>
  <div class="row">
    <div class="offset-md-3 col-md-6">
      <div>
      <p>コメント件数：<%= @post.post_comments.count %></p>
        <% @post.post_comments.each do |post_comment| %>
          <p>
          <%= image_tag post_comment.user.get_profile_image, class: "rounded-circle", size: "50x50" %>
          <%= post_comment.user.nickname %>
          <%= post_comment.created_at.strftime('%Y/%m/%d %H:%M:%S') %>&emsp;</br>
          <%= post_comment.body %>
          <% if post_comment.user == current_user %>
            <%= link_to "削除する", post_post_comment_path(post_comment.post, post_comment), method: :delete, class: "btn-sm btn-danger" %>
          <% end %>
          </p>
        <% end %>
      </div>
      <div>
        <%= form_with model: [@post, @post_comment] do |f| %>
          <%= f.text_area :body, rows: "5", placeholder: "コメントをここに(100文字以内)", cols: "50" %>
          <%= f.submit "送信する" %>
        <% end %>
      </div>
    </div>
  </div>
    <button class="btn btn-outline-primary mb-5" onclick="history.back(-1)">一覧へ戻る</button>
</div>